import Doc from '~/components/layout/docs'
import { Image } from '~/components/media'
import Caption from '~/components/text/caption'
import Collapse, { CollapseGroup } from '~/components/collapse'
import BitbucketDefaultBehaviour from '~/components/git-mdx/bitbucket/default-behaviour.mdx'
import BitbucketEnvironmentVariables from '~/components/git-mdx/bitbucket/environment-variables.mdx'
import BitbucketDisconnecting from '~/components/git-mdx/bitbucket/disconnecting.mdx'

export const meta = {
  title: 'ZEIT Now for Bitbucket',
  description:
    'Deploy each change in your Bitbucket projects with ZEIT Now to share and test with your colleagues. Instant share-able links to your work with each push. Automatically make your changes available from production domains.',
  editUrl: 'pages/docs/v2/git-integrations/zeit-now-for-bitbucket.mdx',
  lastEdited: '2020-03-20T03:12:50.000Z'
}

The ZEIT Now for Bitbucket integration automatically deploys your Bitbucket projects with [ZEIT Now](/), providing [Preview Deployment URLs](/docs/v2/platform/deployments#preview), and automatic [Custom Domain](/docs/v2/custom-domains) updates.

<Image
  src={`${process.env.ASSETS}/docs/now-for-bitbucket/project-commit.png`}
  width={2240/2.5}
  height={1282/2.5}
/>
<Caption style={{marginTop: '-40px'}}>Commits pushed to Bitbucket are automatically built and deployed with Now.</Caption>

### Connecting with Bitbucket

Link your Bitbucket account with your personal account or team on ZEIT Now from your dashboard by clicking ["Import Project"](/import) followed by ["From Git Repository"](/import/git). Then, click the "Bitbucket" tab and click "Connect with Bitbucket".

<Image
  src={`${process.env.ASSETS}/docs/git-integrations/connect-bitbucket.png`}
  width={966 / 2}
  height={612 / 2}
  shadow
  borderRadius
/>
<Caption>ZEIT Now for Bitbucket, ready to connect.</Caption>

Once you have authorized the Bitbucket integration, you will be redirected back to the "Import Git Repository" page where you can import a project from an existing repository by clicking the "Import Project from Bitbucket" button under the "Bitbucket" tab.

For more information on deploying projects, read [the ZEIT Now introduction documentation](/docs).

### Change or Disconnect from your Bitbucket Repository

If youâ€™d like to:

- Change the Bitbucket repository your project is connected to
- Disconnect your project from your Bitbucket repository

You can do so from [the "Git Integration" fieldset](/docs/v2/platform/projects#git-integration) on [Project Settings](/docs/v2/platform/projects#project-settings).

### More Information About ZEIT Now for Bitbucket

For more information, such as a reference for default environment variables, expand the relevant details view below.

<CollapseGroup hashToTitle={{ 'disconnect-from-bitbucket': 'Disconnect from Bitbucket'}}>
  <Collapse title="Default Behaviour">
    <BitbucketDefaultBehaviour />
  </Collapse>

<Collapse title="Included Environment Variables">
  <BitbucketEnvironmentVariables />
</Collapse>

<Collapse title="Disconnect from Bitbucket">
    <BitbucketDisconnecting />
  </Collapse>
</CollapseGroup>

export default ({ children }) => <Doc meta={meta}>{children}</Doc>

export const config = {
  amp: 'hybrid'
}
